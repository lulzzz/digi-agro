<?xml version="1.0" encoding="UTF-8"?>

<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
         http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">

    <changeSet id="insert-super-admin" author="maxim.nistreanu" failOnError="false" runOnChange="true">
        <sql>
            <!--password: test123 -->
            INSERT INTO user_account (id, username, password) values(1, 'super-admin', '$2a$10$J.79O6b/Zo9rPAivWonK1ufA3yB.dsH1UJMVZRrarOrBiDzFRT9NO');
        </sql>
    </changeSet>

    <changeSet id="insert-authorities" author="maxim.nistreanu" failOnError="false" runOnChange="true">
        <sql>
            INSERT INTO authority (id, name) values(1, 'ROLE_SUPER_ADMIN');
            INSERT INTO authority (id, name) values(2, 'ROLE_ADMIN');
            INSERT INTO authority (id, name) values(3, 'ROLE_USER');
        </sql>
    </changeSet>

    <changeSet id="insert-user-authorities" author="maxim.nistreanu" failOnError="false" runOnChange="true">
        <sql>
            INSERT INTO user_authority (user_id, authority_id) VALUES (1, 1);
        </sql>
    </changeSet>

    <changeSet id="prepare_work_types" author="maxim.nistreanu" failOnError="false" runOnChange="true">
        <sql>
            INSERT INTO work_type (id, name) VALUES
            (1, 'SOWING'),
            (2, 'PLOWING'),
            (3, 'GATHERING'),
            (4, 'WATERING'),
            (5, 'WATERING'),
            (6, 'SPRAY');
        </sql>
    </changeSet>

    <!--
        COUNTIES - raioane/judete pentru fiecare tara aparte, specificat in 2 limbi
    -->
    <changeSet id="add_counties" author="mgorgos" failOnError="true" runOnChange="true">
        <createTable tableName="counties">
            <column name="id" type="char(2)">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="country_id" type="char(2)"/>
            <column name="name_ro" type="varchar(128)" encoding="utf8"/>
            <column name="name_ru" type="varchar(128)" encoding="utf8"/>
        </createTable>
    </changeSet>


    <!--
        CITIES_VILAGES - sate si orase din raioane/judete, in 2 limbi
    -->
    <changeSet id="add_cities_villages" author="mgorgos" failOnError="true" runOnChange="true">
        <createTable tableName="cities_villages">
            <column name="id" type="bigint(20) unsigned">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="county_id" type="char(2)"/>
            <column name="name_ro" type="varchar(128)" encoding="utf8"/>
            <column name="name_ru" type="varchar(128)" encoding="utf8"/>
        </createTable>
    </changeSet>


    <!--
        WORK_TYPES - tipuri de lurari agricole. Fara tenant_id vor fi cele generale (arat, semanat, etc)
        dar cu tenant_id vor fi cele mai specifice la fiecare tenant aparte in caz ca va avea nevoie.
        La fel specificat in 2 limbi
    -->
    <changeSet id="add_work_types" author="mgorgos" failOnError="true" runOnChange="true">
        <createTable tableName="work_types">
            <column name="work_type_id" type="bigint(20) unsigned" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="parent_type_id" type="bigint(20) unsigned" />
            <column name="tenant_id" type="bigint(20) unsigned"/>
            <column name="name_ro" type="varchar(128)" encoding="utf8"/>
            <column name="name_ru" type="varchar(128)" encoding="utf8"/>
        </createTable>
    </changeSet>

</databaseChangeLog>